plugins {
    id 'jacoco'
}

jacoco {
    toolVersion = "0.8.2"
}

task codeCoverageReport(type: JacocoReport) {
    executionData fileTree(project.rootDir.absolutePath).include("**/build/jacoco/*.exec")

    subprojects.each {
        sourceSets it.sourceSets.main
    }

    reports {
        xml.enabled true
        xml.destination "${buildDir}/reports/jacoco/report.xml"
        html.enabled false
        csv.enabled false
    }
}

	allprojects {
		repositories {
			maven { url 'https://jitpack.io' }
		}
	}
  
	dependencies {
	        //implementation 'com.github.micro5k:microg-unofficial-installer:-SNAPSHOT'
	}


task build(group: '- Build', description: 'Build.') {
    doLast {
        println 'Building...'
        exec {
            executable = ls
        }
    }
}

task test(dependsOn: ':build') {
    finalizedBy codeCoverageReport
}
