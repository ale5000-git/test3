plugins {
    id 'jacoco'
}

jacoco {
    toolVersion = "0.8.2"
}

task build(group: '- Build', description: 'Build.') {
    doLast {
        println 'Building...'
        exec {
            executable = ls
        }
    }
}

jacocoTestReport{
    //additionalSourceDirs = files(sourceSets.main.allJava.srcDirs)
    executionData fileTree(project.rootDir.absolutePath).include("**/build/jacoco/*.exec")
    reports {
        xml.enabled true
        csv.enabled false
        html.enabled false
    }
    executionData = files('build/jacoco/*.exec')
}

task test(dependsOn: ':build') {
    finalizedBy codeCoverageReport
}
